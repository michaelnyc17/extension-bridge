let Matcher={ENABLE_DEVELOPER_MATCHING:!1,WEIGHTS:{name:.4,url:.3,description:.2,category:.1},THRESHOLDS:{exact:85,similar:50},computeNameSimilarity(e,i){return StringSimilarity.getSimilarityScore(e,i)},computeUrlMatch(e,i){return StringSimilarity.compareUrls(e,i)},computeDescriptionOverlap(e,i){return StringSimilarity.compareDescriptions(e,i)},computeCategoryMatch(e,i){return 50},computeDeveloperSimilarity(e,i){return e&&i?StringSimilarity.normalize(e)===StringSimilarity.normalize(i)?100:StringSimilarity.getSimilarityScore(e,i):0},computeFinalScore(e,i=0){let t=e.name*this.WEIGHTS.name+e.url*this.WEIGHTS.url+e.description*this.WEIGHTS.description+e.category*this.WEIGHTS.category;return t=this.ENABLE_DEVELOPER_MATCHING&&0<i?Math.min(100,t+.15*i):t},classifyMatch(e){return e>=this.THRESHOLDS.exact?{type:"exact",label:"✅ Exact Match",confidence:"high"}:e>=this.THRESHOLDS.similar?{type:"similar",label:"⚠️ Similar Alternative",confidence:"medium"}:{type:"none",label:"❌ No Good Match",confidence:"low"}},findBestMatch(i,e){if(!e||0===e.length)return null;let t=null,r=0;for(var a of e){var o,s={name:this.computeNameSimilarity(i.name,a.name),url:this.computeUrlMatch(i.homepageUrl||"",a.homepage),description:this.computeDescriptionOverlap(i.description||"",a.description),category:this.computeCategoryMatch(i,a)};let e=0;this.ENABLE_DEVELOPER_MATCHING&&(n=i.author||"",o=a.developer||"",e=this.computeDeveloperSimilarity(n,o));var n=this.computeFinalScore(s,e);n>r&&(r=n,t={firefoxAddon:a,score:n,classification:this.classifyMatch(n),breakdown:s,developerBonus:e,matchReasons:this.getMatchReasons(s,i,a,e)})}return t&&"none"===t.classification.type&&30<=r&&(t.classification={type:"similar",label:"⚠️ Possible Match",confidence:"low"}),t},getMatchReasons(e,i,t,r=0){var a=[];return 90<=e.name?a.push("identical name"):70<=e.name&&a.push("similar name"),100===e.url?a.push("same homepage URL"):90===e.url&&a.push("same domain/repository"),70<=e.description&&a.push("similar description"),this.ENABLE_DEVELOPER_MATCHING&&80<=r?a.push("same developer"):this.ENABLE_DEVELOPER_MATCHING&&60<=r&&a.push("similar developer"),i.author&&t.developer&&80<=StringSimilarity.getSimilarityScore(i.author,t.developer)&&a.push("same developer"),0===a.length&&a.push("keyword match only"),a},async processExtensions(i,t){var r,a=[];let o=0;for(r of i)try{var e=await FirefoxAPI.searchWithStrategies(r),s=this.findBestMatch(r,e);a.push({chromeExtension:r,match:s,allFirefoxResults:e.slice(0,5)}),o++,t&&t(o,i.length)}catch(e){console.error(`Error processing ${r.name}:`,e),a.push({chromeExtension:r,match:null,error:e.message}),o++,t&&t(o,i.length)}return a}};